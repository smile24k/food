var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;import{c as n,a as r,o as c,b as l,F as u,d as i,_ as d,e as m,f as p,g,h as f,i as h,j as b,k as v,l as k,m as y,n as _,p as P,q as j,r as w,s as I,t as x,u as E,v as O,w as S,x as C,y as L,z as T,A as M,B as $,C as A,D as R,E as q,G as z,H as D,I as F,J as U,K as H,L as V,M as B,N as J,O as N,P as W}from"./vendor.0f5a02ad.js";let G;const K={},Q=function(e,t){if(!t||0===t.length)return e();if(void 0===G){const e=document.createElement("link").relList;G=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`./${e}`)in K)return;K[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":G,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))};function X(e){e.msg&&this.$message.warning(e.msg),Y.call(this,e.status)}function Y(e){403===e&&(localStorage.removeItem("loginRes"),localStorage.removeItem("token"),location.href="/")}function Z(){return localStorage.getItem("token")}const ee=Q((()=>import("./Index.c6cdb876.js")),["assets/Index.c6cdb876.js","assets/Index.8e23ae0c.css","assets/vendor.0f5a02ad.js"]),te=Q((()=>import("./About.b082fa2c.js")),["assets/About.b082fa2c.js","assets/vendor.0f5a02ad.js"]),se=Q((()=>import("./Login.183d6d32.js")),["assets/Login.183d6d32.js","assets/Login.e51760f4.css","assets/vendor.0f5a02ad.js"]),ae=n({history:r(),routes:[{path:"/",name:"Index",component:()=>ee},{path:"/login",name:"Login",component:()=>se},{path:"/about",name:"About",component:()=>te,meta:{fullScreen:!0}},{path:"/:pathMatch(.*)*",redirect:"/"}]});ae.beforeEach(((e,t,s)=>{let a=function(){const e=localStorage.getItem("loginRes");return e?JSON.parse(e):{}}();"Login"==e.name||"Login"==t.name||a?s():s("/login")}));const oe={},ne=i("div",null,"components",-1),re=i("div",null,"vue",-1);oe.render=function(e,t){return c(),l(u,null,[ne,re],64)};var ce={install(e){e.component("v-test",oe)}};const le=[d,m,p,g,f,h,b,v,k,y,_,P],ue=[j,w,I,x,E];var ie={install(e){ue.forEach((t=>{e.use(t)})),le.forEach((t=>{e.component(t.name,t)}))}};const de="lavipeditumWeb",me="footBath";var pe=(e,t={})=>{const s={baseURL:"https://food.cherry5tec.com",timeout:1e4,headers:{"Content-Type":"application/json;charset=UTF-8","custom-defined-header-key":"custom-defined-header-value",common:{"common-defined-key-b":"custom value: for all methods"},post:{"post-custom-key":"custom value: only for post method"},get:{"get-custom-key":"custom value: only for get method"},token:Z(),device_id:de,product:me},withCredentials:!1};return Object.assign(e.defaults,s,t),e};let ge=pe(O),fe=pe(ge.create()),he=new Map;const be=fe.interceptors.request.use((e=>(fe.config=Object.assign({},e),e.cancelToken=new O.CancelToken((t=>{he.has(e.url)?t(`${e.url}请求重复`):he.set(e.url,{cancelFn:t,global:e.global})})),e)),(e=>(console.log("请求拦截err:",e),Promise.reject(e)))),ve=fe.interceptors.response.use((e=>{const{config:t}=e;he.delete(t.url);const s=(e=>{const t=e.status;if(t>=200&&t<=300||304===t)return e;{const t=parseInt(e.data&&e.data.code);let s=(e.data||{}).msg;switch(t){case 400:break;case 4001:if(process.server)return;s=s||"登录设备数量超出限制";break;case 403:s=s||"未登录";break;case 404:s=s||"请求地址错误";break;case 412:s=s||"未找到有效session"}return{code:t,message:s}}})(e),a=s.data?s.data:s;return Promise.resolve(a)}),(e=>{const{config:t}=fe;if(O.isCancel(e)||he.delete(t.url),!e)return Promise.reject(e);if(e.response)e=(e=>{const{response:t}=e;switch(t.status||(e.code="",e.message="有response但没有response.status的情况"),e.code=t.status,t.status){case 200:e.message="错误响应也会有状态码为200的情况";break;case 400:e.message="请求错误(400)";break;case 401:e.message="未授权，请重新登录(401)";break;case 403:e.message="拒绝访问(403)";break;case 404:e.message="请求出错(404)";break;case 408:e.message="请求超时(408)";break;case 500:e.message="服务器错误(500)";break;case 501:e.message="服务未实现(501)";break;case 502:e.message="网络错误(502)";break;case 503:e.message="服务不可用(503)";break;case 504:e.message="网络超时(504)";break;case 505:e.message="HTTP版本不受支持(505)";break;default:e.message=`连接出错，状态码：(${e.response.status})!`}return e})(e);else{if(O.isCancel(e))throw new O.Cancel(e.message||`请求'${fe.config.url}'被取消`);e.stack&&e.stack.includes("timeout")?e.message="请求超时!":e.message="连接服务器失败!"}var s;return s=e.message,alert(s||"请求出错啦"),Promise.reject(e)}));fe.removeRequestInterceptor=function(){fe.interceptors.request.eject(be)},fe.removeResponseInterceptor=function(){fe.interceptors.response.eject(ve)},fe.clearPendingPool=function(e=[]){if(!he.size)return;const t=Array.from(he.keys()).filter((t=>!e.includes(t)));return t.length?(t.forEach((e=>{he.get(e).global||(he.get(e).cancelFn(),he.delete(e))})),t):void 0};var ke=function(e){const n={};return Object.keys(e).forEach((r=>{let{method:c,url:l,config:u}=e[r];c=c.toUpperCase(),n[r]=(e={},n={})=>{const r=["PUT","POST","PATCH"].includes(c)?"data":"params";return fe(((e,n)=>{for(var r in n||(n={}))s.call(n,r)&&o(e,r,n[r]);if(t)for(var r of t(n))a.call(n,r)&&o(e,r,n[r]);return e})({method:c,url:l,[r]:e},Object.assign(u||{},n)))}})),n}({login:{method:"post",url:"/back/login"},logout:{method:"post",url:"/logout"},getMenu:{method:"get",url:"/back/menu/tree"}});const ye=S({setup(){const{proxy:e}=R();C();const t=L(),s=L([]);return T((async()=>{const[a,o={}]=await M(ke.getMenu());if(!a){if(200!==o.status)return X.call(e,o);console.log(o.data),s.value=o.data||[],t.value=o.data[0].id}})),{activeId:t,menus:s,handleSelect:(e,s,a)=>{t.value=e}}}}),_e=q("data-v-77ed302c"),Pe=_e(((e,t,s,a,o,n)=>{const r=z("el-menu-item"),d=z("el-submenu"),m=z("el-menu"),p=z("el-affix");return c(),l(p,{style:{width:"100%"}},{default:_e((()=>[i(m,{"default-active":e.activeId,class:"menu-box",mode:"horizontal",onSelect:e.handleSelect,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},{default:_e((()=>[(c(!0),l(u,null,$(e.menus,(e=>(c(),l(u,null,[(e.children||[]).length?(c(),l(d,{index:e.id,key:e.id},{title:_e((()=>[D(F(e.name),1)])),default:_e((()=>[(c(!0),l(u,null,$(e.children,((e,t)=>(c(),l(r,{key:t,index:e.id},{default:_e((()=>[D(F(e.name),1)])),_:2},1032,["index"])))),128))])),_:2},1032,["index"])):(c(),l(r,{index:e.id,key:e.id},{default:_e((()=>[D(F(e.name),1)])),_:2},1032,["index"]))],64)))),256))])),_:1},8,["default-active","onSelect"]),A(e.$slots,"actions",{},void 0,!0)])),_:3})}));ye.render=Pe,ye.__scopeId="data-v-77ed302c";const je={components:{Menu:ye},setup(){const{ctx:e}=R();console.log(e.$route);const t=C(),s=V(),a=L({});B((()=>{a.value=s.meta||{}})),T((()=>{Z()||t.replace("/login")}));return{logout:async()=>{const[e,s={}]=await M(ke.logout());if(!e)return 200!==s.status?X.call(proxy,s):void t.replace("/login")},routeMeta:a}}},we=q("data-v-91ab7ac2");U("data-v-91ab7ac2");const Ie={class:"menu-wrap-actions"},xe=D("退 出");H();const Ee=we(((e,t,s,a,o,n)=>{const r=z("el-button"),d=z("Menu"),m=z("router-view");return c(),l(u,null,[J(i(d,null,{actions:we((()=>[i("div",Ie,[i(r,{type:"primary",plain:"",round:"",size:"small",onClick:a.logout},{default:we((()=>[xe])),_:1},8,["onClick"])])])),_:1},512),[[N,!a.routeMeta.fullScreen]]),i("div",{class:["router-content",a.routeMeta.fullScreen?"full":""]},[i(m)],2)],64)}));je.render=Ee,je.__scopeId="data-v-91ab7ac2";const Oe=W(je);Oe.config.devtools=!0,Oe.config.globalProperties.$message=I,Oe.use(ce).use(ae).use(ie).mount("#app");export{ye as _,ke as a,X as r};
